import{A as C,B as a,C as I,F as v,K as g,k as _,ka as b,l,la as D,m as h,ma as W,n as p,o as u,p as S,qa as k,t as f,u as w,v as m,w as o,x as n,z as x}from"./chunk-ZWY6K752.js";function y(d,s){if(d&1){let r=x();o(0,"app-card",2),C("clicked",function(){let i=l(r).$index,c=a();return h(c.onCardSelect(i))}),n()}if(d&2){let r=s.$implicit,e=s.$index,t=a();S("src",r.value)("state",t.cardState[e])("disabled",t.disabledGifs[e])}}function z(d,s){if(d&1){let r=x();o(0,"app-word-option",3),C("clicked",function(){let i=l(r).$index,c=a();return h(c.onWordSelect(i))}),n()}if(d&2){let r=s.$implicit,e=s.$index,t=a();S("value",r.value)("state",t.wordState[e])("disabled",t.disabledWords[e])}}var $=(()=>{let s=class s{constructor(e,t){this.quizService=e,this.route=t,this.taskId=+this.route.snapshot.params.id,this.wordSelectedIdx=null,this.cardSelectedIdx=null,this.wordState=[],this.cardState=[],this.disabledWords=[],this.disabledGifs=[],this.connecteds=[],this.initialize()}onCardSelect(e){this.cardSelectedIdx!=null&&(this.cardState[this.cardSelectedIdx]=""),this.cardSelectedIdx=e,this.cardState[e]="pending";let t=this.gifs[e];if(this.wordSelectedIdx!=null){let i=this.words[this.wordSelectedIdx];this.handleNewConnection(i,t)}}onWordSelect(e){this.wordSelectedIdx!=null&&(this.wordState[this.wordSelectedIdx]=""),this.wordSelectedIdx=e,this.wordState[e]="pending";let t=this.words[e];if(this.cardSelectedIdx!=null){let i=this.gifs[this.cardSelectedIdx];this.handleNewConnection(t,i)}}initialize(){if(this.quizService.existsInStore(this.taskId)){let t=this.quizService.getFromStore(this.taskId);this.gifs=t.gifs,this.words=t.words,this.wordState=t.wordState,this.cardState=t.cardState,this.disabledGifs=t.disabledGifs,this.disabledWords=t.disabledWords}else this.gifs=this.quizService.getFourGif(),this.words=this.quizService.getFourWord()}handleNewConnection(e,t){this.generateNewConnection(e,t),this.handleAnswer(e,t),this.storeData()}generateNewConnection(e,t){let i={word:e.id,gif:t.id};this.connecteds.push(i)}handleAnswer(e,t){this.quizService.isRight(e,t)?this.updateProperties("correct"):(this.updateProperties("incorrect"),this.quizService.decrementLives())}updateProperties(e){this.wordSelectedIdx!=null&&this.cardSelectedIdx!=null&&(this.wordState[this.wordSelectedIdx]=e,this.cardState[this.cardSelectedIdx]=e,this.disabledGifs[this.cardSelectedIdx]=!0,this.disabledWords[this.wordSelectedIdx]=!0),this.wordSelectedIdx=null,this.cardSelectedIdx=null}storeData(){if(this.disabledGifs.length==4&&this.disabledWords.length==4&&this.disabledGifs.every(e=>e==!0)&&this.disabledWords.every(e=>e==!0)){let e={gifs:this.gifs,words:this.words,wordState:this.wordState,cardState:this.cardState,disabledWords:this.disabledWords,disabledGifs:this.disabledGifs,connecteds:this.connecteds};this.quizService.setInStore(this.taskId,e)}}};s.\u0275fac=function(t){return new(t||s)(u(k),u(g))},s.\u0275cmp=_({type:s,selectors:[["app-connect"]],standalone:!0,features:[v],decls:9,vars:0,consts:[[1,"task"],[1,"list-row"],[3,"src","state","disabled","clicked"],[3,"value","state","disabled","clicked"],[3,"src","state","disabled"],[3,"value","state","disabled"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"h1"),I(2,"\u10D3\u10D0\u10D0\u10D9\u10D0\u10D5\u10E8\u10D8\u10E0\u10D4"),n(),o(3,"div",1),w(4,y,1,3,"app-card",4,f),n(),o(6,"div",1),w(7,z,1,3,"app-word-option",5,f),n()()),t&2&&(p(4),m(i.gifs),p(3),m(i.words))},dependencies:[W,b,D]});let d=s;return d})();export{$ as ConnectComponent};
